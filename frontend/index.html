<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
</head>
<body>
  <h2>Login</h2>
  <form id="login-form">
    <input type="email" id="email" placeholder="Email" required /><br/>
    <input type="password" id="password" placeholder="Password" required /><br/>
    <button type="submit">Login</button>
  </form>
  <p><a href="/register.html">Register here</a></p>
  <p id="message" style="color: red;"></p>

<script>
document.getElementById('login-form').addEventListener('submit', async e => {
  e.preventDefault();
  const email = document.getElementById('email').value;
  const password = document.getElementById('password').value;
  const msgElem = document.getElementById('message');
  try {
    const res = await fetch('http://localhost:5000/login', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({email, password})
    });
    const data = await res.json();
    if (res.ok) {
      msgElem.style.color = 'green';
      msgElem.textContent = `Login successful! Welcome, ${data.email}`;
    } else {
      msgElem.style.color = 'red';
      msgElem.textContent = data.message || 'Login failed!';
    }
  } catch (err) {
    msgElem.style.color = 'red';
    msgElem.textContent = 'Network error: ' + err.message;
  }
});
</script>
</body>
</html>
